{% extends 'layout.html' %}

{% block content %}
  <div class="timeline">
    <h1>Q&A</h1>
    <div class="twit">
      {% if post.id %}
      <div id="post-form">
        <a>
          <div class="profile-section">
            <div>
              {% if post.User.user_image %}
                <img class="pic" src="{{post.User.user_image}}">  
              {% else %}
                <img class="pic" src="/static/profile.png">
              {% endif %}
            </div>
            <div>
              <p>{{post.UserId}}</p>
              <p>{{post.createdAt.toLocaleString('ko-KR')}}</p>
            </div>
            
          </div>
        </a>
        <hr>
        <div class="postDetailhastagContainer">
        <div class="hashtag-title">Tags</div>
        {% if hashtag.title%}
          <div class="hashtag-item">{{hashtag.title}}</div>
        {% endif %}
        </div>
        <div class="input-group">
          <div class="post-title">{{post.post_title}}</div>
          <div class="post-code-area">
            <div class="title">코드</div>
            <pre>
            <code>
              {{post.code_content}}
            </code>
            </pre>
          </div>
            {% if post.post_img %} <!-- 이미지는 있는경우만 보이게 셋팅-->
              <div class="post-img"><img src="{{post.post_img}}" alt="섬네일"></div>
            {% endif %}
          <div class="post-content">{{post.question_content}}</div>
        </div>
      </div>
      {% endif %}
    </div>
  {% if user and user.id %} <!-- 로그인 했을때만 댓글기능 활성화-->
  <div class="twit">
      <form id="comment-form" action="/commentInsert" method="post">
        <input type="hidden" name="postId" value="{{post.id}}">
        <div class="comment-section">
            <img class="pic" src="/static/profile.png">
            <p>{{user.id}}</p> 
        </div>
        <div class="input-group">
            <input id="content" type="type" name="content" placeholder="설명 입력">
            <button id="" class="btn">등록</button>
        </div>
      </form>
  </div>
  {% endif %}
  <div>
    {% for c in comment %}
      <div class="twit">
        <div class="input-group">
        <div class="profile-section">
          <div>
            <img class="pic" src="/static/profile.png">
          </div>
          <div>
            <p>{{c.commenter}}</p>
            <p>{{c.created_at.toLocaleString('ko-KR')}}</p>
          </div>
        </div>
        <hr>
        <div>{{c.comment}}</div>
        <button id="" class="btn">수정</button>
        <button id="" class="btn" onclick="delfunc()">삭제</button>

        <script>
          function delfunc()
          {
            if(confirm('삭제 하시겠습니까?')) {
              // axios로 삭제 기능 추가
            }
          }

        </script>

        </div>
      </div>
    {% endfor %}
  </div>

{% endblock %}
{% block script %}
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
{% endblock %}